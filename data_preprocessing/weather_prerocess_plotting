import pandas as pd
import streamlit as st
from datetime import datetime
import matplotlib.pyplot as plt

df = pd.read_csv('data.csv')
print(df.columns)
print(df.isnull().sum())#checking if dataset has null values
def extract_day(date_string):
    date_obj = datetime.strptime(date_string[:13], "%Y-%m-%d %H")
    return date_obj.day

def average_temp_per_date(df,column):
    df['date'] = df['date'].apply(lambda x: extract_day(x))
    avg_by_date = df.groupby(df['date'].datetime.date)[column].mean()
    return avg_by_date

def meteo_temperature_print(df, columns):
    #df['date'] = df['date'].apply(lambda x: extract_day(x))
    for column in columns:
        df = average_temp_per_date(df,column)
        st.line_chart(df[['date', column]].set_index('date'))
# Display the plots using Streamlit
st.write("### Time Series Plots")
columns_to_plot = st.multiselect("Select columns to plot:", df.columns)
if columns_to_plot:
    meteo_temperature_print(df, columns_to_plot)
else:
    st.write("Please select at least one column to plot.")
   
